# A6: Indexes, triggers, user functions and population
 
This artefact contains the physical schema of the database, the identification and characterisation of the indexes, the support of data integrity rules with triggers and the definition of the database user-defined functions. This artefact also contains the database's workload as well as the complete database creation script, including all SQL necessary to define all integrity constraints, indexes and triggers. 

## 1. Database Workload
  
### 1.1. Tuple Estimation
  
| Relation reference | Relation Name | Order of magnitude        | Estimated growth |
| ------------------ | ------------- | ------------------------- | ---------------- |
| R01                | users         | thousands                 | units per day    |
| R02                | addresses     | thousands                 | units per day    |
| R03                | faqs          | tens                      | units per year   |
| R04                | purchases     | thousands                 | dozens per day   |
| R05                | delivery_types| units                     | units per year   |
| R06                | product_carts | thousands                 | hundreds per day |
| R07                | products      | hundreds                  | units per month |
| R08                | product_purchases        | thousands      | dozens per day |
| R09                | photos        | thousands                 | units per month |
| R10                | categories        | units                 | units per year |
| R11                | properties        | tens                  | dozens per year |
| R12                | category_properties        | hundreds     | dozens per year |
| R13                | reviews        | thousands                | dozens per day |
| R14                | wishlists        | thousands              | units per day |
| R15                | admins        | units                     | units per year |
| R16                | archived_products        | tens           | units per year |
| R17                | values_lists        | hundreds            | units per month | 
| R18                | values        | thousands                 | dozens per month |
| R19                | countries          | units                | unit per year |
| R20                | cities        | hundreds                  | units per year |


### 1.2. Frequent Queries
 
| Query reference   | SELECT01          |
|-------------------|-------------------|
| Query description | get user info     |
| Query frequency   | thousands per day |
```sql
SELECT users.name, users.username, users.email FROM users WHERE id = $id;

```

| Query reference   | SELECT02           |
|-------------------|--------------------|
| Query description | get user addresses |
| Query frequency   | dozens per day     |
```sql
SELECT A.id, A.name, A.street, A."postal_code", CTY.name, CNTR.name FROM addresses AS A, 
cities AS CTY,countries AS CNTR 
WHERE A."user_id" = $id AND A."city_id" = CTY.id 
AND CTY."country_id" = CNTR.id 
AND A.isArchived = false;
```
 | Query reference   | SELECT03         |
|-------------------|------------------|
| Query description | sign in          |
| Query frequency   | hundreds per day |
```sql
SELECT id FROM users WHERE username = $username AND password = $hashedPassword;

SELECT id FROM users WHERE email = $email AND password = $hashedPassword;

```

| Query reference   | SELECT04                               |
| ----------------- | -------------------------------------- |
| Query description | User purchases of a certain type |
| Query frequency   | dozens per day                     |
```sql
SELECT PRCHS.id, PRCHS."date", PRCHS.status, PRCHS.total
FROM purchases AS PRCHS
WHERE PRCHS."user_id" = $id
AND PRCHS.status = $type;
```

| Query reference   | SELECT05                               |
| ----------------- | -------------------------------------- |
| Query description | Get purchase products |
| Query frequency   | dozens per day                     |
```sql
SELECT PRDCT.id, PRDCT.name, PP.price, PP.quantity
FROM purchases AS PRCHS, products AS PRDCT, product_purchases AS PP
WHERE PRCHS.id = $id
AND PP."purchase_id" = PRCHS.id
AND PP."product_id" = PRDCT.id;
```

| Query reference   | SELECT06                               |
| ----------------- | -------------------------------------- |
| Query description | Get purchase address |
| Query frequency   | dozens per day                     |
```sql
SELECT A.street, A."postal_code", CTY.name, CNTR.name
FROM purchases AS P, addresses AS A, cities AS CTY, countries AS CNTR
WHERE P.id = $id
AND P."address_id" = A.id
AND A."city_id" = CTY.id
AND CTY."country_id" = CNTR.id;
```

| Query reference   | SELECT07                               |
| ----------------- | -------------------------------------- |
| Query description | Get purchases from any user of a certain type |
| Query frequency   | dozens per day                     |
```sql
SELECT PRCHS.id, PRCHS."date", PRCHS.status, PRCHS.total, PRCHS.user_id
FROM users AS U, purchases AS PRCHS
WHERE PRCHS.status = $type;
```

| Query reference   | SELECT08                               |
| ----------------- | -------------------------------------- |
| Query description | Get purchase user name |
| Query frequency   | dozens per day                     |
```sql
SELECT users.username
FROM purchases
WHERE purchases.user_id = $userId;
```

| Query reference   | SELECT09                               |
| ----------------- | -------------------------------------- |
| Query description | Get properties |
| Query frequency   | dozens per day                     |
```sql
SELECT name
FROM properties;
```

| Query reference   | SELECT10                               |
| ----------------- | -------------------------------------- |
| Query description | Get all properties' names from each category |
| Query frequency   | dozens per day                     |
```sql
SELECT categories.id,categories.name
FROM categories;

SELECT category_properties.property_id,category_properties.is_required_property
FROM category_properties
WHERE category_id = $category_id;

SELECT name
FROM properties
WHERE properties.id = $id;
```

| Query reference   | SELECT11                               |
| ----------------- | -------------------------------------- |
| Query description | Get faqs |
| Query frequency   | units per day                     |
```sql
SELECT question,answer
FROM faqs;
```

| Query reference   | SELECT12                               |
| ----------------- | -------------------------------------- |
| Query description | Dropdown navigation admin |
| Query frequency   | dozens per day                     |
```sql
SELECT Categories.name
FROM categories AS Categories
WHERE  (SELECT COUNT(*)
       FROM products AS Products
       WHERE Products.category_id = Categories.id) > 1;
```

| Query reference   | SELECT13                               |
| ----------------- | -------------------------------------- |
| Query description | Get all products from category |
| Query frequency   | hundreds per day                     |
```sql
SELECT id
FROM categories
WHERE name = $categoryName;

SELECT products.id, products.name, products.price
FROM products 
WHERE category_id = $categoryId
AND products.id NOT IN(SELECT * FROM archived_products);
```

| Query reference   | SELECT14                               |
| ----------------- | -------------------------------------- |
| Query description | Get products from a category that are in specified price range |
| Query frequency   | hundreds per day                     |
```sql
SELECT products.id, products.name, products.price
FROM products
WHERE category_id = $categoryId
AND price < $maxPrice AND products.id NOT IN(SELECT * FROM archived_products);
```

| Query reference   | SELECT15                               |
| ----------------- | -------------------------------------- |
| Query description | Search products |
| Query frequency   | hundreds per day                     |
```sql
SELECT *
FROM products
WHERE search @@ plainto_ts_query('english', $nameSearched)
AND products.id NOT IN(SELECT * FROM archived_products);
```

| Query reference   | SELECT16                               |
| ----------------- | -------------------------------------- |
| Query description | Homepage products |
| Query frequency   | hundreds per day                     |
```sql
SELECT name, price
FROM products
WHERE id = $prod_id;
```

| Query reference   | SELECT17                               |
| ----------------- | -------------------------------------- |
| Query description | Get isNavBar categories |
| Query frequency   | hundreds per day                     |
```sql
SELECT id, name
FROM categories
WHERE is_navbar_category = TRUE;
```

| Query reference   | SELECT18                               |
| ----------------- | -------------------------------------- |
| Query description | Get Categories product not archived
 |
| Query frequency   | hundreds per day                     |
```sql
SELECT P.id, P.name, P.price
FROM products AS P
WHERE category_id = $cat_id
AND P.id NOT IN (SELECT product_id FROM archived_products);

SELECT path
FROM photos
WHERE product_id = $prod_id
ORDER BY id
LIMIT 1;
```

| Query reference   | SELECT19                               |
| ----------------- | -------------------------------------- |
| Query description | Get for each category (required properties-only x first) - get categories’ properties values |
| Query frequency   | dozens per day                     |
```sql
SELECT V.id, V.name
FROM values AS V
JOIN values_lists AS VL
JOIN category_properties AS CP
WHERE CP.is_required_property = true
LIMIT 5;
```

| Query reference   | SELECT20                               |
| ----------------- | -------------------------------------- |
| Query description | Get Checkout |
| Query frequency   | hundreds per day                     |
```sql
SELECT name, cost
FROM delivery_types;
```

| Query reference   | SELECT21                               |
| ----------------- | -------------------------------------- |
| Query description | Get cart |
| Query frequency   | hundreds per day                     |
```sql
SELECT product_id, quantity
FROM product_carts
WHERE user_id = $user_id;
```

| Query reference   | SELECT22                               |
| ----------------- | -------------------------------------- |
| Query description | Get wishlist |
| Query frequency   | hundreds per day                     |
```sql
SELECT product_id
FROM wishlists
WHERE user_id = $user_id;
```

| Query reference   | SELECT23                               |
| ----------------- | -------------------------------------- |
| Query description | Get city and coutries |
| Query frequency   | units per day                     |
```sql
SELECT *
FROM countries;

SELECT name
FROM cities
WHERE country_id = $countryId;
```

| Query reference   | SELECT24                               |
| ----------------- | -------------------------------------- |
| Query description | Get product info for product page |
| Query frequency   | hundreds per day                     |
```sql
SELECT name, price, score, brand,quantity
FROM products
WHERE id = $prod_id;
```

| Query reference   | SELECT25                               |
| ----------------- | -------------------------------------- |
| Query description | Get photos of product |
| Query frequency   | hundreds per day                     |
```sql
SELECT path
FROM photos
WHERE product_id = $prod_id;
```

| Query reference   | SELECT26                               |
| ----------------- | -------------------------------------- |
| Query description | Get properties of product |
| Query frequency   | hundreds per day                     |
```sql
SELECT V.name, P.name
FROM values AS V, values_lists AS VL, category_properties AS CP, properties AS P
WHERE VL.product_id = $prod_id
AND V.values_list_id = VL.id
AND VL.category_property_id = CP.id AND CP.property_id = P.id;
```

| Query reference   | SELECT27                               |
| ----------------- | -------------------------------------- |
| Query description | Get reviews |
| Query frequency   | hundreds per day                     |
```sql
SELECT R.title, R.content, R.date, R.score, U.name
FROM reviews AS R, users AS U
WHERE R.user_id = U.id AND R.product_id = $prod_id;
```
 
### 1.3. Frequent Updates
 
| Query reference   | UPDATE01                                                                                             |
|-------------------|------------------------------------------------------------------------------------------------------|
| Query description | update user info                                                                                     |
| Query frequency   | units per day                                                                                        |
```sql 
UPDATE users SET name=$name, username=$username, email=$email,password=$hashedPassword WHERE id=$id;
```


| Query reference   | UPDATE02                                                  |
|-------------------|-----------------------------------------------------------|
| Query description | Update Archive Address                                    |
| Query frequency   | units per day                                             |
```sql
UPDATE addresses SET is_archived=$isArchived WHERE id=$id;
```


| Query reference   | UPDATE03                                                          |
|-------------------|-------------------------------------------------------------------|
| Query description | Update on hold purchase status                                    |
| Query frequency   | hundreds per day                                                  |
```sql
UPDATE purchases SET status=$status WHERE purchase_id=$purchaseId
```


| Query reference   | UPDATE04                                                                              |
|-------------------|---------------------------------------------------------------------------------------|
| Query description | Update product quantity from cart                                                     |
| Query frequency   | units per day                                                                         |
```sql 
UPDATE product_carts SET quantity=$quantity WHERE product_id=$prodId AND user_id=$id
```


| Query reference   | UPDATE05               |
|-------------------|------------------------|
| Query description | change products values |
| Query frequency   | units per month        |
```sql 
UPDATE products SET name=$name,price=$price,quantity=$quantity,brand=$brand WHERE id=$id; 

UPDATE photos SET path=$pathname WHERE product_id=$prod_id; 

UPDATE "values" SET name=$name 
WHERE values_list_id IN (SELECT * FROM values_lists WHERE product_id=$product_id)
```  

| Query reference   | INSERT01                                                                                                         |
|-------------------|------------------------------------------------------------------------------------------------------------------|
| Query description | Add address                                                                                                      |
| Query frequency   | units per day                                                                                                    |
```sql
INSERT INTO addresses (name,street,postal_code,city_id,user_id) VALUES($name,$street,$postal_code,$city_id,$id)
```


| Query reference   | INSERT02                                                                                              |
|-------------------|-------------------------------------------------------------------------------------------------------|
| Query description | sign up                                                                                               |
| Query frequency   | units per day                                                                                         |
```sql 
INSERT INTO users (name, username, email,password) VALUES($name, $username, $email, $hashedPassword)
```


| Query reference   | INSERT03                                                                                                       |
|-------------------|----------------------------------------------------------------------------------------------------------------|
| Query description | insert review                                                                                                  |
| Query frequency   | dozens per day                                                                                                 |
```sql
INSERT INTO reviews (user_id,product_id,score,title,content)VALUES($userID,$productID,$score,$title,$content)
```

| Query reference   | INSERT04                                    |
|-------------------|---------------------------------------------|
| Query description | add property                                |
| Query frequency   | dozens per year                             |
```sql
INSERT INTO properties (name)VALUES($name)
```


| Query reference   | INSERT05                                                              |
|-------------------|-----------------------------------------------------------------------|
| Query description | add category                                                          |
| Query frequency   | units per year                                                        |
```sql 
INSERT INTO categories (name,is_navbar_category)VALUES($name,$required)
```

| Query reference   | INSERT06                                                                                 |
|-------------------|------------------------------------------------------------------------------------------|
| Query description | add category properties                                                                  |
| Query frequency   | dozens per year                                                                          |
```sql
INSERT INTO category_properties (category_id,property_id)VALUES($category_id,$property_id)
```


| Query reference   | INSERT07                                                     |
|-------------------|--------------------------------------------------------------|
| Query description | delete product                                               |
| Query frequency   | units per year                                               |
```sql         
INSERT INTO archived_products(product_id)VALUES($productId);
 ```
 
 | Query reference   | INSERT08        |
|-------------------|-----------------|
| Query description | insert wishlist |
| Query frequency   | units per day   |
```sql
INSERT INTO wishlists (user_id,product_id) VALUES ($userid,$productid)
```
| Query reference   | INSERT09                   |
|-------------------|----------------------------|
| Query description | insert new product to cart |
| Query frequency   | hundreds per day           |
```sql
INSERT INTO product_carts (product_id,user_id,quantity) VALUES ($proId,$id,$quantity)
```
| Query reference   | INSERT10                                   |
|-------------------|--------------------------------------------|
| Query description | add purchase and products of that purchase |
| Query frequency   | dozens per day                             |
 ```sql
INSERT INTO purchases (total,user_id,address_id) VALUES ($total,$userid,$address_id)

INSERT INTO product_purchases (product_id,purchase_id,quantity,price) VALUES ($proId,$purchId,$quantity,$price)
 ```
 | Query reference   | INSERT11        |
|-------------------|-----------------|
| Query description | insert products |
| Query frequency   | units per month |
```sql
INSERT INTO products (name,price,quantity_available,score,category_id,brand) 
VALUES ($name,$price,$quantity_available,$score,$category_id,$brand)

INSERT INTO photos (path,product_id) VALUES ($pathname,$proID)

INSERT INTO "values" (name,values_list_id) VALUES ($name,$values_list_id)
```

| Query reference   | DELETE01           |
|-------------------|--------------------|
| Query description | delete user review |
| Query frequency   | dozens per day     |
```sql
DELETE FROM reviews where user_id=$user_id AND product_id=$product_id
```
| Query reference   | DELETE02          |
|-------------------|-------------------|
| Query description | delete properties |
| Query frequency   | units per month   |
```sql

DELETE FROM properties WHERE properties.name = $name;

```

| Query reference   | DELETE03       |
|-------------------|----------------|
| Query description | delete faqs    |
| Query frequency   | units per year |

```sql
DELETE FROM faqs WHERE question=$question;

```
| Query reference   | DELETE04                |
|-------------------|-------------------------|
| Query description | delete product Wishlist |
| Query frequency   | units per day           |
```sql
DELETE FROM whishlist WHERE user_id=$user_id AND product_id=$product_id
```

| Query reference   | DELETE05       |
|-------------------|----------------|
| Query description | Remove Cart    |
| Query frequency   | dozens per day |

```sql
DELETE FROM product_carts WHERE product_id=$prodId AND user_id=$id;
```


## 2. Proposed Indices
 
### 2.1. Performance Indices
 
| Index reference | IDX01                                                                                                                                                                                                                                 |
|-----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Related queries | SELECT01                                                                                                                                                                                                                         |
| Index relation  | users                                                                                                                                                                                                                                 |
| Index attribute | username                                                                                                                                                                                                                              |
| Index type      | Hash                                                                                                                                                                                                                                  |
| Cardinality     | High                                                                                                                                                                                                                                  |
| Clustering      | No                                                                                                                                                                                                                                    |
| Justification   | Query SELECT01 that gets the information of a user is executed several times so it has to be fast; doesn´t need range query support; cardinality is high because the username is a unique key and so it’s not a good candidate for clustering. |
```sql
CREATE INDEX username_users ON users USING hash (username); 
```


| Index reference | IDX02                                                                                                                                                                                             |
|-----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Related queries | SELECT02                                                                                                                                                                                |
| Index relation  | addresses                                                                                                                                                                                         |
| Index attribute | “user_id”                                                                                                                                                                                         |
| Index type      | Hash                                                                                                                                                                                              |
| Cardinality     | Medium                                                                                                                                                                                            |
| Clustering      | Yes                                                                                                                                                                                               |
| Justification   | Query SELECT02 that gets the addresses of a user is executed several times so it has to be fast; doesn´t need range query support; it’s a good candidate for clustering because its cardinality is medium. |
```sql
CREATE INDEX userid_addresses ON addresses USING hash (user_id);
``` 
 
 | Index reference | IDX03                                                                                                                                                                                                        |
|-----------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Related queries | SELECT04                                                                                                                                                                                           |
| Index relation  | purchases                                                                                                                                                                                                    |
| Index attribute | “user_id”                                                                                                                                                                                                    |
| Index type      | Hash                                                                                                                                                                                                         |
| Cardinality     | Medium                                                                                                                                                                                                       |
| Clustering      | Yes                                                                                                                                                                                                          |
| Justification   | Query SELECT04 that gets the history of purchases of a user is executed several times so it has to be fast; doesn´t need range query support; it’s a good candidate for clustering because its cardinality is medium. |
```sql 

CREATE INDEX userid_purchases ON purchases USING hash (user_id); 

```


| Index reference | IDX04                                                                                                                                                                                                      |
|-----------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Related queries | SELECT27                                                                                                                                                                                     |
| Index relation  | reviews                                                                                                                                                                                                    |
| Index attribute | “product_id”                                                                                                                                                                                               |
| Index type      | Hash                                                                                                                                                                                                       |
| Cardinality     | Medium                                                                                                                                                                                                     |
| Clustering      | Yes                                                                                                                                                                                                        |
| Justification   | Query SELECT27 that gets the reviews of a certain product is executed several times so it has to be fast; doesn´t need range query support; it’s a good candidate for clustering because its cardinality is medium. |
```sql

CREATE INDEX productid_reviews ON reviews USING hash (product_id);    
```



| Index reference | IDX05                                                                                                                                                                                                        |
|-----------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Related queries | SELECT18                                                                                                                                                                                    |
| Index relation  | products                                                                                                                                                                                                     |
| Index attribute | “category_id”                                                                                                                                                                                                |
| Index type      | Hash                                                                                                                                                                                                         |
| Cardinality     | Medium                                                                                                                                                                                                       |
| Clustering      | No                                                                                                                                                                                                          |
| Justification   | Query SELECT18 that gets the products of a certain category is executed several times so it has to be fast; doesn´t need range query support; it’s a good candidate for clustering because its cardinality is medium, but it won't be clustered because it's better if the clustered index for the relation products is index IDX06, since it will be used for quick range queries. |
```sql

CREATE INDEX categoryid_products ON products USING hash (category_id);

```

| Index reference | IDX06                                                                                                                                                               |
|-----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Related queries | SELECT14                                                                                                                         |
| Index relation  | products                                                                                                                                                            |
| Index attribute | price                                                                                                                                                               |
| Index type      | B-tree                                                                                                                                                              |
| Cardinality     | High                                                                                                                                                                |
| Clustering      | Yes                                                                                                                                                                 |
| Justification   | To allow searching products of a certain product that have the price lower than a certain value faster; It’s B-tree and clustered to allow for quick range queries. |
```sql
CREATE INDEX price_products ON products USING btree (price);
```

### 2.2. Full-text Search Indices

| Index reference | IDX07                                                                                                                             |
|-----------------|-----------------------------------------------------------------------------------------------------------------------------------|
| Related queries | SELECT15                                                                                                                  |
| Index relation  | products                                                                                                                          |
| Index attribute | name                                                                                                                              |
| Index type      | GiST                                                                                                                              |
| Cardinality     | High                                                                                                                              |
| Clustering      | No                                                                                                                                |
| Justification   | To improve the performance of full-text searches while searching for products by name; GiST because it's better for dynamic data. |
```sql
CREATE INDEX search_product ON products USING GIST (search);
```

## 3. Triggers
 
| Trigger reference   | TRIGGER01                                                |
|---------------------|----------------------------------------------------------|
| Trigger description | Update products' score according to all existing reviews |
```sql
CREATE FUNCTION update_product_score() RETURNS TRIGGER AS
$BODY$
BEGIN
	UPDATE products
	SET score = (AVG(score) FROM reviews WHERE product_id = New.product_id)
	WHERE "product_id" = New."product_id"
END
$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER product_score AFTER INSERT OR UPDATE OR DELETE
ON reviews
EXECUTE PROCEDURE update_product_score();
```

| Trigger reference   | TRIGGER02                                       |
|---------------------|-------------------------------------------------|
| Trigger description | An user can only review products that he bought |
```sql
CREATE FUNCTION add_review() RETURNS TRIGGER AS
$BODY$
BEGIN
    IF NOT EXISTS (SELECT Product.product_id
                 FROM purchases AS Purchases, product_purchases AS Product, users AS Users
                 WHERE Purchases.id = Product.purchase_id AND New.user_id = Purchases.user_id
                 AND New.product_id = Product.product_id AND Users.id = *LOGGED_USER_ID*) THEN
        RAISE EXCEPTION 'You can not review a product you have not purchased.';
    END IF;
    RETURN NEW;
END
$BODY$
LANGUAGE plpgsql;
 
CREATE TRIGGER add_review
BEFORE INSERT OR UPDATE ON review
FOR EACH ROW
EXECUTE PROCEDURE add_review();
```

| Trigger reference   | TRIGGER03                                          |
|---------------------|----------------------------------------------------|
| Trigger description | An user can't buy more than the available quantity |
```sql
CREATE FUNCTION check_purchases_quantities() RETURNS TRIGGER AS
$BODY$
BEGIN
	IF 
		NOT EXISTS 
			(SELECT quantity_available FROM products 
			WHERE id = New.product_id 
			AND quantity_available >= New.quantity) 
	THEN
		RAISE EXCEPTION ’You can’t buy % items of product %’ , New.quantity, New.product_id
	END IF;
	RETURN NEW;
END
$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER check_purchase_quantities BEFORE INSERT
ON product_purchases
FOR EACH ROW
EXECUTE PROCEDURE check_purchases_quantities();
```

| Trigger reference   | TRIGGER04                                              |
|---------------------|--------------------------------------------------------|
| Trigger description | When a user buy a product it is removed from it's cart |
```sql
CREATE FUNCTION clear_cart() RETURNS TRIGGER AS
$BODY$
BEGIN
	DELETE FROM product_carts
	WHERE "user_id" = New."user_id"
END
$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER clear_cart AFTER INSERT
ON purchases
EXECUTE PROCEDURE clear_cart();
```

| Trigger reference   | TRIGGER05                                                                  |
|---------------------|------------------------------------------------------------------------------|
| Trigger description | If a wishlist's product is added to the cart it is removed from the wishlist |
```sql
CREATE FUNCTION remove_wishlist_product() RETURNS TRIGGER AS
$BODY$
BEGIN
	DELETE FROM wishlist
	WHERE "user_id" = New."user_id"
  AND "product_id" = New."product_id"
END
$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER remove_wishlist_product AFTER INSERT
ON product_carts
EXECUTE PROCEDURE remove_wishlist_product();
```

| Trigger reference   | TRIGGER06                                                  |
|---------------------|------------------------------------------------------------|
| Trigger description | When a product is bought its available quantity is reduced |
```sql
CREATE FUNCTION update_available_products() RETURNS TRIGGER AS
$BODY$
BEGIN
  UPDATE products
  SET quantity = quantity - New.quantity
  WHERE "product_id" = New."product_id"
END
$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER update_available_products AFTER INSERT
ON product_purchases
EXECUTE PROCEDURE update_available_products();
```

| Trigger reference   | TRIGGER07                                                       |
|---------------------|-----------------------------------------------------------------|
| Trigger description | An archived product should be removed from any cart or wishlist |
```sql
CREATE FUNCTION archive_product() RETURN TRIGGER AS
$BODY$
BEGIN
	DELETE FROM whishlists
	WHERE product_id = NEW.id
	DELETE FROM product_carts
	WHERE product_id = NEW.id
	
END
$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER archive_product AFTER INSERT
ON archived_products
FOR EACH ROW
EXECUTE PROCEDURE archive_product();
```


| Trigger reference   | TRIGGER08                                                       |
|---------------------|-----------------------------------------------------------------|
| Trigger description | To keep TSVECTOR in sync |
```sql
CREATE FUNCTION product_search_update() RETURN TRIGGER AS
$BODY$
BEGIN
	IF TG_OP = 'INSERT' THEN
		NEW.search = to_tsvector ('english', NEW.name);
	END IF;
	IF TG_OP = 'UPDATE THEN
		IF NEW.name <> OLD.name THEN
			NEW.search = to_tsvector ('english', NEW.name);
		ENDIF;
	ENDIF;
	RETURN NEW;
END
$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER product_search_update() BEFORE INSERT OR UPDATE 
ON Products
FOR EACH ROW
EXECUTE PROCEDURE tsvector_update_trigger();
```
 
 
## 4. Complete SQL Code
 
```sql
--Tables
CREATE DOMAIN "Today" AS date NOT NULL DEFAULT ('now'::text)::date;


CREATE TABLE countries (
    id serial PRIMARY KEY,
    name text NOT NULL UNIQUE
);

CREATE TABLE cities (
    id serial PRIMARY KEY,
    name text NOT NULL UNIQUE,
    "country_id" integer NOT NULL REFERENCES countries(id) ON DELETE CASCADE
);

CREATE TABLE users (
    id serial PRIMARY KEY,
    name text NOT NULL,
    username text NOT NULL UNIQUE,
    email text NOT NULL UNIQUE,
    password text NOT NULL,
    nif integer UNIQUE
);

CREATE TABLE addresses (
    id serial PRIMARY KEY,
    name text NOT NULL,
    street text NOT NULL,
    "postal_code" text NOT NULL,
    "city_id" integer NOT NULL REFERENCES cities(id) ON DELETE CASCADE,
    "user_id" integer NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    "is_archived" boolean DEFAULT false NOT NULL
);

CREATE TABLE admins (
    "user_id" integer PRIMARY KEY REFERENCES users(id) ON DELETE CASCADE
);

CREATE TABLE categories (
    id serial PRIMARY KEY,
    name text NOT NULL UNIQUE,
    "is_navbar_category" boolean DEFAULT false NOT NULL
);


CREATE TABLE properties (
    id serial PRIMARY KEY,
    name text NOT NULL UNIQUE
);


CREATE TABLE category_properties (
    id serial PRIMARY KEY,
    "category_id" integer NOT NULL REFERENCES categories(id) ON DELETE CASCADE,
    "property_id" integer NOT NULL REFERENCES properties(id) ON DELETE CASCADE,
    "is_required_property" boolean DEFAULT false NOT NULL
);

CREATE TABLE products (
    id serial PRIMARY KEY,
    name text NOT NULL,
    price double precision NOT NULL,
    "quantity_available" integer NOT NULL,
    score double precision NOT NULL,
    "category_id" integer NOT NULL REFERENCES categories(id) ON DELETE CASCADE,
    CONSTRAINT price CHECK ((price > (0)::double precision)),
    CONSTRAINT quantity_available CHECK ((quantity_available >= 0)),
    CONSTRAINT score CHECK (score >= 0 AND score <= 5)
);

CREATE TABLE archived_products (
    "product_id" integer PRIMARY KEY REFERENCES products(id) ON DELETE CASCADE
);

CREATE TABLE delivery_types (
    id serial PRIMARY KEY,
    name text NOT NULL UNIQUE,
    cost double precision NOT NULL UNIQUE
);

CREATE TABLE faqs (
    id serial PRIMARY KEY,
    question text NOT NULL UNIQUE,
    answer text NOT NULL
);

CREATE TABLE photos (
    id serial PRIMARY KEY,
    path text NOT NULL,
    "product_id" integer NOT NULL REFERENCES products(id) ON DELETE CASCADE
);

CREATE TABLE product_carts (
    id serial PRIMARY KEY,
    "user_id" integer NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    "product_id" integer NOT NULL REFERENCES products(id) ON DELETE CASCADE,
    quantity integer NOT NULL,
    CONSTRAINT quantity CHECK ((quantity > 0))
);

CREATE TABLE purchases (
    id serial PRIMARY KEY,
    "date" TIMESTAMP WITH TIME zone DEFAULT now() NOT NULL,
    total double precision NOT NULL,
    "user_id" integer NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    "address_id" integer NOT NULL REFERENCES addresses(id) ON DELETE CASCADE,
    status text DEFAULT 'Processing'::text NOT NULL,
    CONSTRAINT status CHECK (status IN ('Processing', 'Shipped', 'Delivered')),
    CONSTRAINT total CHECK ((total > (0)::double precision))
);

CREATE TABLE product_purchases (
    "product_id" integer NOT NULL REFERENCES products(id) ON DELETE CASCADE,
    "purchase_id" integer NOT NULL REFERENCES purchases(id) ON DELETE CASCADE,
    quantity integer NOT NULL,
    price double precision NOT NULL,
    CONSTRAINT price CHECK ((price > (0)::double precision)),
    CONSTRAINT quantity CHECK ((quantity > 0)),
    PRIMARY KEY ("product_id", "purchase_id")
);


CREATE TABLE reviews (
    "user_id" integer REFERENCES users(id) ON DELETE CASCADE,
    "product_id" integer REFERENCES products(id) ON DELETE CASCADE,
    score integer NOT NULL,
    title text NOT NULL,
    content text NOT NULL,
    CONSTRAINT score CHECK (((score >= 0) AND (score <= 5))),
    PRIMARY KEY ("user_id", "product_id")
);

CREATE TABLE values_lists (
    id serial PRIMARY KEY,
    "category_property_id" integer NOT NULL REFERENCES category_properties(id) ON DELETE CASCADE,
    "product_id" integer NOT NULL REFERENCES products(id) ON DELETE CASCADE,
    UNIQUE("category_property_id", "product_id")
);

CREATE TABLE values (
    id serial PRIMARY KEY,
    name text,
    "values_list_id" integer NOT NULL REFERENCES values_lists(id) ON DELETE CASCADE
);


CREATE TABLE wishlists (
    "user_id" integer REFERENCES users(id) ON DELETE CASCADE,
    "product_id" integer REFERENCES products(id) ON DELETE CASCADE,
    PRIMARY KEY ("user_id", "product_id")
);

--Indexs

CREATE INDEX username_users ON users USING hash (username);

CREATE INDEX userid_addresses ON addresses USING hash (user_id);

CREATE INDEX userid_purchases ON purchases USING hash (user_id);

CREATE INDEX productid_reviews ON reviews USING hash (product_id);

CREATE INDEX categoryid_products ON products USING hash (category_id);

CREATE INDEX price_products ON products USING btree (price);

CREATE INDEX search_product ON products USING GIST (name);

--Triggers

CREATE FUNCTION update_product_score() RETURNS TRIGGER AS
$BODY$
BEGIN
	UPDATE products
	SET score = (AVG(score) FROM reviews WHERE product_id = New.product_id)
	WHERE "product_id" = New."product_id"
END
$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER product_score AFTER INSERT OR UPDATE OR DELETE
ON reviews
EXECUTE PROCEDURE update_product_score();


CREATE FUNCTION add_review() RETURNS TRIGGER AS
$BODY$
BEGIN
    IF NOT EXISTS (SELECT Product.product_id
                 FROM purchases AS Purchases, product_purchases AS Product, users AS Users
                 WHERE Purchases.id = Product.purchase_id AND New.user_id = Purchases.user_id
                 AND New.product_id = Product.product_id AND Users.id = *LOGGED_USER_ID*) THEN
        RAISE EXCEPTION 'You can not review a product you have not purchased.';
    END IF;
    RETURN NEW;
END
$BODY$
LANGUAGE plpgsql;
 
CREATE TRIGGER add_review
BEFORE INSERT OR UPDATE ON review
FOR EACH ROW
EXECUTE PROCEDURE add_review();
            
CREATE FUNCTION check_purchases_quantities() RETURNS TRIGGER AS
$BODY$
BEGIN
	IF 
		NOT EXISTS (SELECT quantity_available FROM products WHERE id = New.product_id AND quantity_available >= New.quantity) 
	THEN
		RAISE EXCEPTION ’You can’t buy % items of product %’ , New.quantity, New.product_id
	END IF;
	RETURN NEW;
END
$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER check_purchase_quantities BEFORE INSERT
ON product_purchases
FOR EACH ROW
EXECUTE PROCEDURE check_purchases_quantities();

CREATE FUNCTION clear_cart() RETURNS TRIGGER AS
$BODY$
BEGIN
	DELETE FROM product_carts
	WHERE "user_id" = New."user_id"
END
$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER clear_cart AFTER INSERT
ON purchases
EXECUTE PROCEDURE clear_cart();


CREATE FUNCTION remove_wishlist_product() RETURNS TRIGGER AS
$BODY$
BEGIN
	DELETE FROM wishlist
	WHERE "user_id" = New."user_id"
  AND "product_id" = New."product_id"
END
$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER remove_wishlist_product AFTER INSERT
ON product_carts
EXECUTE PROCEDURE remove_wishlist_product();

CREATE FUNCTION update_available_products() RETURNS TRIGGER AS
$BODY$
BEGIN
  UPDATE products
  SET quantity = quantity - New.quantity
  WHERE "product_id" = New."product_id"
END
$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER update_available_products AFTER INSERT
ON product_purchases
EXECUTE PROCEDURE update_available_products();

CREATE FUNCTION archive_product() RETURN TRIGGER AS
$BODY$
BEGIN
	DELETE FROM whishlists
	WHERE product_id = NEW.id
	DELETE FROM product_carts
	WHERE product_id = NEW.id
	
END
$BODY$
LANGUAGE plpgsql;

CREATE TRIGGER archive_product AFTER INSERT
ON archived_products
FOR EACH ROW
EXECUTE PROCEDURE archive_product();
```


DATA

```sql
/*ADDRESSES*/
INSERT INTO addresses (name, street, "postal_code", "city_id", "user_id") VALUES ('home', 'Dennis', '18740-000', 1, 7);
INSERT INTO addresses (name, street, "postal_code", "city_id", "user_id") VALUES ('country house', 'Dahle', '18740-000', 2, 3);
INSERT INTO addresses (name, street, "postal_code", "city_id", "user_id") VALUES ('company', 'Luster', '22205', 3, 18);
INSERT INTO addresses (name, street, "postal_code", "city_id", "user_id") VALUES ('home', 'Monica', '88000-000', 4, 2);
INSERT INTO addresses (name, street, "postal_code", "city_id", "user_id") VALUES ('work', 'Manitowish', '151287', 5, 16);
INSERT INTO addresses (name, street, "postal_code", "city_id", "user_id") VALUES ('work', 'Dovetail', '22205', 6, 19);
INSERT INTO addresses (name, street, "postal_code", "city_id", "user_id") VALUES ('home', 'Garrison', '88000-000', 7, 2);
INSERT INTO addresses (name, street, "postal_code", "city_id", "user_id") VALUES ('home', 'Loeprich', '88000-000', 8, 13);
INSERT INTO addresses (name, street, "postal_code", "city_id", "user_id") VALUES ('work', 'Prairieview', '169060', 9, 8);
INSERT INTO addresses (name, street, "postal_code", "city_id", "user_id") VALUES ('work', 'Fairfield', '88000-000', 10, 16);
INSERT INTO addresses (name, street, "postal_code", "city_id", "user_id") VALUES ('home', '1st', '18740-000', 11, 2);
INSERT INTO addresses (name, street, "postal_code", "city_id", "user_id") VALUES ('work', 'Waxwing', '22205', 12, 15);
INSERT INTO addresses (name, street, "postal_code", "city_id", "user_id") VALUES ('work', 'Memorial', '14908 CEDEX 9', 13, 16);
INSERT INTO addresses (name, street, "postal_code", "city_id", "user_id") VALUES ('work', 'Nova', '88000-000', 14, 12);
INSERT INTO addresses (name, street, "postal_code", "city_id", "user_id") VALUES ('home', 'Ramsey', '18740-000', 15, 4);
INSERT INTO addresses (name, street, "postal_code", "city_id", "user_id") VALUES ('home', 'Monument', '2530-254', 16, 9);
INSERT INTO addresses (name, street, "postal_code", "city_id", "user_id") VALUES ('home', 'Valley Edge', '456209', 17, 9);
INSERT INTO addresses (name, street, "postal_code", "city_id", "user_id") VALUES ('work', 'Thierer', '88000-000', 18, 14);
INSERT INTO addresses (name, street, "postal_code", "city_id", "user_id") VALUES ('work', 'Meadow Vale', '456209', 19, 13);
INSERT INTO addresses (name, street, "postal_code", "city_id", "user_id") VALUES ('home', 'Veith', '18740-000', 20, 10);

/*ADMINS*/
INSERT INTO admins ("user_id") VALUES (1);
INSERT INTO admins ("user_id") VALUES (2);
INSERT INTO admins ("user_id") VALUES (3);
INSERT INTO admins ("user_id") VALUES (4);

/*ARCHIVED-PRODUCTS*/
INSERT INTO archived_products ("product_id") VALUES (10);
INSERT INTO archived_products ("product_id") VALUES (12);

/*CATEGORIES*/
INSERT INTO categories (name, "is_navbar_category") VALUES ('Smartphones', true);
INSERT INTO categories (name, "is_navbar_category") VALUES ('Tablets', true);
INSERT INTO categories (name, "is_navbar_category") VALUES ('Computers', true);
INSERT INTO categories (name, "is_navbar_category") VALUES ('Monitors', true);
INSERT INTO categories (name, "is_navbar_category") VALUES ('Accessories', true);

/*CATEGORIES-PROPERTIES*/
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (1, 1, false);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (1, 2, true);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (1, 3, true);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (1, 4, true);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (1, 7, true);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (1, 8, true);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (1, 10, true);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (1, 11, false);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (1, 12, true);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (1, 13, false);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (1, 15, true);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (1, 16, true);

INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (2, 1, false);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (2, 2, true);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (2, 3, true);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (2, 4, true);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (2, 5, true);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (2, 6, true);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (2, 7, true);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (2, 8, true);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (2, 9, false);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (2, 10, false);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (2, 11, false);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (2, 12, true);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (2, 13, true);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (2, 14, false);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (2, 16, true);

INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (3, 1, false);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (3, 2, true);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (3, 3, true);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (3, 4, true);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (3, 7, true);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (3, 8, true);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (3, 10, false);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (3, 11, false);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (3, 12, true);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (3, 13, false);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (3, 14, false);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (3, 15, false);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (3, 16, true);

INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (4, 1, false);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (4, 3, true);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (4, 8, true);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (4, 13, true);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (4, 16, false);

INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (5, 1, false);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (5, 7, false);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (5, 8, false);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (5, 11, false);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (5, 12, false);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (5, 13, false);
INSERT INTO category_properties ("category_id", "property_id", "is_required_property") VALUES (5, 16, false);

/*CITIES*/
INSERT INTO cities (name, "country_id") VALUES ('Rubio', 1);
INSERT INTO cities (name, "country_id") VALUES ('Jiayuguan', 2);
INSERT INTO cities (name, "country_id") VALUES ('Huanggang', 2);
INSERT INTO cities (name, "country_id") VALUES ('Ereencav', 3);
INSERT INTO cities (name, "country_id") VALUES ('El Cocuy', 4);
INSERT INTO cities (name, "country_id") VALUES ('Xinzheng', 2);
INSERT INTO cities (name, "country_id") VALUES ('Gawul', 7);
INSERT INTO cities (name, "country_id") VALUES ('Trà My', 5);
INSERT INTO cities (name, "country_id") VALUES ('Mikun’', 6);
INSERT INTO cities (name, "country_id") VALUES ('Ambarita', 7);
INSERT INTO cities (name, "country_id") VALUES ('Taquarituba', 8);
INSERT INTO cities (name, "country_id") VALUES ('Arlington', 9);
INSERT INTO cities (name, "country_id") VALUES ('Caen', 10);
INSERT INTO cities (name, "country_id") VALUES ('Itacorubi', 8);
INSERT INTO cities (name, "country_id") VALUES ('Darband', 11);
INSERT INTO cities (name, "country_id") VALUES ('Seixal', 12);
INSERT INTO cities (name, "country_id") VALUES ('Zlatoust', 6);
INSERT INTO cities (name, "country_id") VALUES ('Mucllo', 13);
INSERT INTO cities (name, "country_id") VALUES ('Dashi', 2);
INSERT INTO cities (name, "country_id") VALUES ('Kuta', 14);

/*COUNTRIES*/
INSERT INTO countries (name) VALUES ('Venezuela');
INSERT INTO countries (name) VALUES ('China');
INSERT INTO countries (name) VALUES ('Mongolia');
INSERT INTO countries (name) VALUES ('Colombia');
INSERT INTO countries (name) VALUES ('Vietnam');
INSERT INTO countries (name) VALUES ('Russia');
INSERT INTO countries (name) VALUES ('Indonesia');
INSERT INTO countries (name) VALUES ('Brazil');
INSERT INTO countries (name) VALUES ('United States');
INSERT INTO countries (name) VALUES ('France');
INSERT INTO countries (name) VALUES ('Tajikistan');
INSERT INTO countries (name) VALUES ('Portugal');
INSERT INTO countries (name) VALUES ('Peru');
INSERT INTO countries (name) VALUES ('Nigeria');

/*DELIVERY_TYPES*/
INSERT INTO delivery_types (name, cost) VALUES ('Standard Delivery', '0.99');
INSERT INTO delivery_types (name, cost) VALUES ('Express Delivery', '9.99');
INSERT INTO delivery_types (name, cost) VALUES ('Priority Delivery', '19.99');

/*FAQS*/
INSERT INTO faqs (question, answer) 
VALUES ('Sed sagittis?', 'Duis mattis egestas metus. Aenean fermentum. Donec ut mauris eget massa tempor convallis.');
INSERT INTO faqs (question, answer) 
VALUES ('Nullam varius?', 'Aliquam quis turpis eget elit sodales scelerisque.');
INSERT INTO faqs (question, answer) 
VALUES ('Ut tellus. Nulla ut erat id mauris vulputate elementum?', 'Aliquam augue quam, sollicitudin vitae, consectetuer eget, rutrum at, lorem. Integer tincidunt ante vel ipsum. Praesent blandit lacinia erat.');
INSERT INTO faqs (question, answer) 
VALUES ('Suspendisse accumsan tortor quis turpi?', 'Aenean fermentum.');
INSERT INTO faqs (question, answer) 
VALUES ('Curabitur at ipsum ac tellus semper interdum?', 'Morbi porttitor lorem id ligula.');
INSERT INTO faqs (question, answer) 
VALUES ('Nullam sit amet turpis elementum ligula vehicula consequat. Morbi a ipsum?', 'Quisque id justo sit amet sapien dignissim vestibulum. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Nulla dapibus dolor vel est.');
INSERT INTO faqs (question, answer) 
VALUES ('Nullam sit amet turpis elementum ligula vehicula consequat?', 'Suspendisse potenti. In eleifend quam a odio.');

/*PHOTOS*/
INSERT INTO photos (path, "product_id") VALUES ('http://dummyimage.com/1000x810.jpg/5fa2dd/ffffff', 1);
INSERT INTO photos (path, "product_id") VALUES ('http://dummyimage.com/1000x810.jpg/ff4444/ffffff', 2);
INSERT INTO photos (path, "product_id") VALUES ('http://dummyimage.com/1000x810.jpg/5fa2dd/ffffff', 3);
INSERT INTO photos (path, "product_id") VALUES ('http://dummyimage.com/1000x810.jpg/5fa2dd/ffffff', 4);
INSERT INTO photos (path, "product_id") VALUES ('http://dummyimage.com/1000x810.jpg/dddddd/000000', 5);
INSERT INTO photos (path, "product_id") VALUES ('http://dummyimage.com/1000x810.jpg/cc0000/ffffff', 6);
INSERT INTO photos (path, "product_id") VALUES ('http://dummyimage.com/1000x810.jpg/5fa2dd/ffffff', 7);
INSERT INTO photos (path, "product_id") VALUES ('http://dummyimage.com/1000x810.jpg/ff4444/ffffff', 8);
INSERT INTO photos (path, "product_id") VALUES ('http://dummyimage.com/1000x810.jpg/cc0000/ffffff', 9);
INSERT INTO photos (path, "product_id") VALUES ('http://dummyimage.com/1000x810.jpg/dddddd/000000', 10);
INSERT INTO photos (path, "product_id") VALUES ('http://dummyimage.com/1000x810.jpg/5fa2dd/ffffff', 11);
INSERT INTO photos (path, "product_id") VALUES ('http://dummyimage.com/1000x810.jpg/5fa2dd/ffffff', 12);
INSERT INTO photos (path, "product_id") VALUES ('http://dummyimage.com/1000x810.jpg/cc0000/ffffff', 13);
INSERT INTO photos (path, "product_id") VALUES ('http://dummyimage.com/1000x810.jpg/cc0000/ffffff', 14);
INSERT INTO photos (path, "product_id") VALUES ('http://dummyimage.com/1000x810.jpg/dddddd/000000', 15);
INSERT INTO photos (path, "product_id") VALUES ('http://dummyimage.com/1000x810.jpg/ff4444/ffffff', 16);

/*PRODUCT-CARTS*/
INSERT INTO product_carts ("user_id", "product_id", quantity) VALUES (6, 16, 2);
INSERT INTO product_carts ("user_id", "product_id", quantity) VALUES (6, 2, 2);
INSERT INTO product_carts ("user_id", "product_id", quantity) VALUES (19, 7, 1);
INSERT INTO product_carts ("user_id", "product_id", quantity) VALUES (2, 9, 2);
INSERT INTO product_carts ("user_id", "product_id", quantity) VALUES (3, 13, 3);
INSERT INTO product_carts ("user_id", "product_id", quantity) VALUES (11, 12, 2);
INSERT INTO product_carts ("user_id", "product_id", quantity) VALUES (9, 1, 1);
INSERT INTO product_carts ("user_id", "product_id", quantity) VALUES (10, 5, 1);
INSERT INTO product_carts ("user_id", "product_id", quantity) VALUES (17, 6, 3);
INSERT INTO product_carts ("user_id", "product_id", quantity) VALUES (15, 7, 1);
INSERT INTO product_carts ("user_id", "product_id", quantity) VALUES (12, 12, 1);
INSERT INTO product_carts ("user_id", "product_id", quantity) VALUES (13, 4, 2);

/*PRODUCT-PURCHASES*/
INSERT INTO product_purchases ("product_id", "purchase_id", quantity, price) VALUES (1, 14, 1, 1106.96);
INSERT INTO product_purchases ("product_id", "purchase_id", quantity, price) VALUES (2, 4, 2, 717.73);
INSERT INTO product_purchases ("product_id", "purchase_id", quantity, price) VALUES (3, 8, 1, 1072.94);
INSERT INTO product_purchases ("product_id", "purchase_id", quantity, price) VALUES (4, 8, 1, 1107.96);
INSERT INTO product_purchases ("product_id", "purchase_id", quantity, price) VALUES (5, 12, 2, 556.97);
INSERT INTO product_purchases ("product_id", "purchase_id", quantity, price) VALUES (6, 15, 1, 910.6);
INSERT INTO product_purchases ("product_id", "purchase_id", quantity, price) VALUES (7, 9, 1, 1015.66);
INSERT INTO product_purchases ("product_id", "purchase_id", quantity, price) VALUES (8, 7, 2, 1064.08);
INSERT INTO product_purchases ("product_id", "purchase_id", quantity, price) VALUES (9, 14, 2, 840.37);
INSERT INTO product_purchases ("product_id", "purchase_id", quantity, price) VALUES (10, 3, 2, 885.43);
INSERT INTO product_purchases ("product_id", "purchase_id", quantity, price) VALUES (11, 9, 1, 462.09);
INSERT INTO product_purchases ("product_id", "purchase_id", quantity, price) VALUES (12, 5, 2, 666.96);
INSERT INTO product_purchases ("product_id", "purchase_id", quantity, price) VALUES (13, 5, 2, 689.05);
INSERT INTO product_purchases ("product_id", "purchase_id", quantity, price) VALUES (14, 5, 2, 1180.96);
INSERT INTO product_purchases ("product_id", "purchase_id", quantity, price) VALUES (15, 15, 1, 596.35);

/*PRODUCTS*/
INSERT INTO products (name, price, "quantity_available", score, "category_id", brand) VALUES ('Apple iPhone X - 64GB - Space Grey', '1179.00', 100, 3, 1, 'Apple');
INSERT INTO products (name, price, "quantity_available", score, "category_id", brand) VALUES ('Apple iPhone 8 - 64GB - Gold', '829.00', 60, 4, 1, 'Apple');
INSERT INTO products (name, price, "quantity_available", score, "category_id", brand) VALUES ('Samsung Galaxy S9+ - 64GB - Midnight Black', '969.90', 100, 3, 1, 'Samsung');
INSERT INTO products (name, price, "quantity_available", score, "category_id", brand) VALUES ('Samsung Galaxy S9 - 64GB - Blue', '869.99', 90, 4, 1, 'Samsung');

INSERT INTO products (name, price, "quantity_available", score, "category_id", brand) VALUES ('Apple iPad Pro 12,9" - 256GB - Space Grey', '1249.00', 100, 5, 2, 'Apple');
INSERT INTO products (name, price, "quantity_available", score, "category_id", brand) VALUES ('Samsung Galaxy Tab S2 9.7" - T819 - Black', '529.99', 90, 5, 2, 'Samsung');
INSERT INTO products (name, price, "quantity_available", score, "category_id", brand) VALUES ('Asus ZenPad 10" Z301MF-1H011A - Grey', '219.99', 20, 5, 2, 'Asus');
INSERT INTO products (name, price, "quantity_available", score, "category_id", brand) VALUES ('Huawei MediaPad M3 8.4"', '321.00', 100, 1, 2, 'Huawei');

INSERT INTO products (name, price, "quantity_available", score, "category_id", brand) VALUES ('Apple MacBook Pro 13" Retina i5-2,3GHz - 128GB - Space Gray', '1549.00', 50, 2, 3, 'Apple');
INSERT INTO products (name, price, "quantity_available", score, "category_id", brand) VALUES ('Apple MacBook Air 13" i5-1,8GHz - 256GB', '1379.00', 50, 1, 3, 'Apple');
INSERT INTO products (name, price, "quantity_available", score, "category_id", brand) VALUES ('Asus Zenbook UX430UA-57CHDCB1', '949.99', 80, 1, 3, 'Asus');

INSERT INTO products (name, price, "quantity_available", score, "category_id", brand) VALUES ('Gaming Asus FHD VP278QG - 27"', '259.99', 80, 3, 4, 'Asus');
INSERT INTO products (name, price, "quantity_available", score, "category_id", brand) VALUES ('iMac 21,5" Retina 5K - 2,3 GHz - 1 TB', '1349.00', 90, 3, 4, 'Apple');
INSERT INTO products (name, price, "quantity_available", score, "category_id", brand) VALUES ('iMac 27" Retina 5K - 3,8 GHz - 2 TB', '2699.00', 15, 1, 4, 'Apple');

INSERT INTO products (name, price, "quantity_available", score, "category_id", brand) VALUES ('Headphones Beats Studio3 Wireless - Black Shadow', '349.99', 10, 2, 5, 'Beats');
INSERT INTO products (name, price, "quantity_available", score, "category_id", brand) VALUES ('Power Bank Xiaomi Mi Power 20000mAh - White', '45.99', 50, 1, 5, 'Xiaomi');

/*PROPERTIES*/
INSERT INTO properties (name) VALUES ('Finish');
INSERT INTO properties (name) VALUES ('Operating System');
INSERT INTO properties (name) VALUES ('Display');
INSERT INTO properties (name) VALUES ('Processor');
INSERT INTO properties (name) VALUES ('RAM Memory');
INSERT INTO properties (name) VALUES ('Graphics');
INSERT INTO properties (name) VALUES ('Storage');
INSERT INTO properties (name) VALUES ('Size and Weight');
INSERT INTO properties (name) VALUES ('Wireless');
INSERT INTO properties (name) VALUES ('Camera');
INSERT INTO properties (name) VALUES ('Audio');
INSERT INTO properties (name) VALUES ('Power and Battery');
INSERT INTO properties (name) VALUES ('Interface');
INSERT INTO properties (name) VALUES ('Software');
INSERT INTO properties (name) VALUES ('Sensors');
INSERT INTO properties (name) VALUES ('Accessories');

/*PURCHASES*/
INSERT INTO purchases (date, total, "user_id", "address_id", status) VALUES ('2017-08-07', 2914.73, 2, 4, 'Processing');
INSERT INTO purchases (date, total, "user_id", "address_id", status) VALUES ('2017-10-31', 1709.06, 7, 1, 'Shipped');
INSERT INTO purchases (date, total, "user_id", "address_id", status) VALUES ('2017-10-04', 3964.32, 7, 1, 'Delivered');
INSERT INTO purchases (date, total, "user_id", "address_id", status) VALUES ('2017-08-18', 1408.06, 9, 16, 'Processing');
INSERT INTO purchases (date, total, "user_id", "address_id", status) VALUES ('2017-04-11', 1115.11, 8, 9, 'Shipped');
INSERT INTO purchases (date, total, "user_id", "address_id", status) VALUES ('2017-12-12', 4507.83, 8, 9, 'Shipped');
INSERT INTO purchases (date, total, "user_id", "address_id", status) VALUES ('2018-01-20', 899.21, 14, 18, 'Processing');
INSERT INTO purchases (date, total, "user_id", "address_id", status) VALUES ('2018-02-28', 3471.12, 16, 13, 'Processing');
INSERT INTO purchases (date, total, "user_id", "address_id", status) VALUES ('2017-02-22', 625.19, 19, 6, 'Shipped');
INSERT INTO purchases (date, total, "user_id", "address_id", status) VALUES ('2017-04-02', 4929.18, 13, 19, 'Delivered');
INSERT INTO purchases (date, total, "user_id", "address_id", status) VALUES ('2017-10-10', 3464.1, 3, 2, 'Shipped');
INSERT INTO purchases (date, total, "user_id", "address_id", status) VALUES ('2017-07-31', 4273.67, 7, 1, 'Processing');
INSERT INTO purchases (date, total, "user_id", "address_id", status) VALUES ('2017-11-18', 538.7, 9, 17, 'Processing');
INSERT INTO purchases (date, total, "user_id", "address_id", status) VALUES ('2017-06-15', 3259.77, 14, 18, 'Delivered');
INSERT INTO purchases (date, total, "user_id", "address_id", status) VALUES ('2017-02-15', 1201.51, 10, 20, 'Shipped');

/*REVIEWS*/
INSERT INTO reviews ("user_id", "product_id", score, title, content, date) VALUES (9, 2, 1, 'Some title', 'Some content.', '2017-06-22');
INSERT INTO reviews ("user_id", "product_id", score, title, content, date) VALUES (10, 6, 5, 'Some title', 'Some content.', '2017-08-12');
INSERT INTO reviews ("user_id", "product_id", score, title, content, date) VALUES (16, 3, 4, 'Some title', 'Some content.', '2018-02-04');
INSERT INTO reviews ("user_id", "product_id", score, title, content, date) VALUES (19, 11, 2, 'Some title', 'Some content.', '2017-03-13');
INSERT INTO reviews ("user_id", "product_id", score, title, content, date) VALUES (10, 15, 3, 'Some title', 'Some content.', '2017-12-28');
INSERT INTO reviews ("user_id", "product_id", score, title, content, date) VALUES (8, 12, 4, 'Some title', 'Some content.', '2018-03-22');

/*USERS*/
INSERT INTO users (name, username, email, password) VALUES ('Dominik Courtliff', 'dcourtliff0', 'dcourtliff0@washington.edu', 'AP8LWaw');
INSERT INTO users (name, username, email, password) VALUES ('Chester Lownes', 'clownes1', 'clownes1@washingtonpost.com', 'LbkRHs');
INSERT INTO users (name, username, email, password) VALUES ('Kathe Omar', 'komar2', 'komar2@e-recht24.de', '2T7AIM');
INSERT INTO users (name, username, email, password) VALUES ('Ethelda Houseago', 'ehouseago3', 'ehouseago3@acquirethisname.com', 'afSIgLsK6M');
INSERT INTO users (name, username, email, password) VALUES ('Amalia Glayzer', 'aglayzer4', 'aglayzer4@bandcamp.com', 'X3hO0S54dSG');
INSERT INTO users (name, username, email, password) VALUES ('Bidget Gehrels', 'bgehrels5', 'bgehrels5@redcross.org', 'YstABQ9w');
INSERT INTO users (name, username, email, password) VALUES ('Davide Wardale', 'dwardale6', 'dwardale6@e-recht24.de', 'BohbUPUS9LkP');
INSERT INTO users (name, username, email, password) VALUES ('Blondie MacPhee', 'bmacphee7', 'bmacphee7@dell.com', 'yk1syP');
INSERT INTO users (name, username, email, password) VALUES ('Rubi Duncklee', 'rduncklee8', 'rduncklee8@npr.org', 'kwDVrx631e');
INSERT INTO users (name, username, email, password) VALUES ('Zorina Hiseman', 'zhiseman9', 'zhiseman9@usa.gov', 'AKniryg');
INSERT INTO users (name, username, email, password) VALUES ('Zola Bosquet', 'zbosqueta', 'zbosqueta@un.org', '5h0MqBhj91HU');
INSERT INTO users (name, username, email, password) VALUES ('Colman Dobey', 'cdobeyb', 'cdobeyb@sciencedaily.com', 'JQGVzuqymhAc');
INSERT INTO users (name, username, email, password) VALUES ('Chrissie Dudbridge', 'cdudbridgec', 'cdudbridgec@dot.gov', 'QWaoJCPAy');
INSERT INTO users (name, username, email, password) VALUES ('Clare Pash', 'cpashd', 'cpashd@51.la', '1fjSLVI08l9k');
INSERT INTO users (name, username, email, password) VALUES ('Daisy Matusov', 'dmatusove', 'dmatusove@ucsd.edu', 'FDE5AhcJ');
INSERT INTO users (name, username, email, password) VALUES ('Gualterio Flanders', 'gflandersf', 'gflandersf@prweb.com', 'QWbc7824');
INSERT INTO users (name, username, email, password) VALUES ('Ulises Reubel', 'ureubelg', 'ureubelg@etsy.com', 'wu7vgJ');
INSERT INTO users (name, username, email, password) VALUES ('Edy MacMenamin', 'emacmenaminh', 'emacmenaminh@ed.gov', 'pvwtW3DT');
INSERT INTO users (name, username, email, password) VALUES ('Zachariah Chadburn', 'zchadburni', 'zchadburni@typepad.com', 'Wcjj8vZSA');
INSERT INTO users (name, username, email, password) VALUES ('Jorry MacAndie', 'jmacandiej', 'jmacandiej@wordpress.com', 'Q9oAsh5');

/*VALUES*/
INSERT INTO values (name, "values_list_id") VALUES ('cubilia curae', 1);
INSERT INTO values (name, "values_list_id") VALUES ('parturient montes', 2);
INSERT INTO values (name, "values_list_id") VALUES ('platea', 3);
INSERT INTO values (name, "values_list_id") VALUES ('adipiscing lorem', 4);
INSERT INTO values (name, "values_list_id") VALUES ('nulla tellus in', 5);
INSERT INTO values (name, "values_list_id") VALUES ('imperdiet', 6);
INSERT INTO values (name, "values_list_id") VALUES ('justo eu', 7);
INSERT INTO values (name, "values_list_id") VALUES ('vestibulum vestibulum', 8);
INSERT INTO values (name, "values_list_id") VALUES ('id justo', 9);
INSERT INTO values (name, "values_list_id") VALUES ('rutrum rutrum neque', 10);
INSERT INTO values (name, "values_list_id") VALUES ('vel', 11);
INSERT INTO values (name, "values_list_id") VALUES ('curabitur in libero', 12);
INSERT INTO values (name, "values_list_id") VALUES ('maecenas ut', 13);
INSERT INTO values (name, "values_list_id") VALUES ('curabitur at ipsum', 14);
INSERT INTO values (name, "values_list_id") VALUES ('sed accumsan felis', 15);
INSERT INTO values (name, "values_list_id") VALUES ('in magna', 16);
INSERT INTO values (name, "values_list_id") VALUES ('quisque', 17);
INSERT INTO values (name, "values_list_id") VALUES ('nulla ultrices', 18);
INSERT INTO values (name, "values_list_id") VALUES ('ac consequat metus', 19);
INSERT INTO values (name, "values_list_id") VALUES ('ac lobortis', 20);
INSERT INTO values (name, "values_list_id") VALUES ('quis', 21);
INSERT INTO values (name, "values_list_id") VALUES ('varius', 22);
INSERT INTO values (name, "values_list_id") VALUES ('vivamus vestibulum', 23);
INSERT INTO values (name, "values_list_id") VALUES ('sed', 24);
INSERT INTO values (name, "values_list_id") VALUES ('suscipit', 25);
INSERT INTO values (name, "values_list_id") VALUES ('est quam pharetra', 26);
INSERT INTO values (name, "values_list_id") VALUES ('luctus ultricies', 27);
INSERT INTO values (name, "values_list_id") VALUES ('quisque id', 28);
INSERT INTO values (name, "values_list_id") VALUES ('sapien cursus vestibulum', 29);
INSERT INTO values (name, "values_list_id") VALUES ('ultrices aliquet maecenas', 30);
INSERT INTO values (name, "values_list_id") VALUES ('in faucibus', 31);
INSERT INTO values (name, "values_list_id") VALUES ('quis', 32);
INSERT INTO values (name, "values_list_id") VALUES ('dui', 33);
INSERT INTO values (name, "values_list_id") VALUES ('luctus et', 34);
INSERT INTO values (name, "values_list_id") VALUES ('nulla', 35);
INSERT INTO values (name, "values_list_id") VALUES ('diam', 36);
INSERT INTO values (name, "values_list_id") VALUES ('id pretium iaculis', 37);
INSERT INTO values (name, "values_list_id") VALUES ('lacus at', 38);
INSERT INTO values (name, "values_list_id") VALUES ('nibh quisque id', 39);
INSERT INTO values (name, "values_list_id") VALUES ('posuere', 40);
INSERT INTO values (name, "values_list_id") VALUES ('molestie nibh', 41);
INSERT INTO values (name, "values_list_id") VALUES ('ultrices vel augue', 42);
INSERT INTO values (name, "values_list_id") VALUES ('turpis sed ante', 43);
INSERT INTO values (name, "values_list_id") VALUES ('in', 44);
INSERT INTO values (name, "values_list_id") VALUES ('sit', 45);
INSERT INTO values (name, "values_list_id") VALUES ('tempus', 46);
INSERT INTO values (name, "values_list_id") VALUES ('nonummy', 47);
INSERT INTO values (name, "values_list_id") VALUES ('nec dui luctus', 48);
INSERT INTO values (name, "values_list_id") VALUES ('vel lectus in', 49);
INSERT INTO values (name, "values_list_id") VALUES ('ultrices erat tortor', 50);
INSERT INTO values (name, "values_list_id") VALUES ('at', 51);
INSERT INTO values (name, "values_list_id") VALUES ('quis orci eget', 52);
INSERT INTO values (name, "values_list_id") VALUES ('porta', 53);
INSERT INTO values (name, "values_list_id") VALUES ('ut', 54);
INSERT INTO values (name, "values_list_id") VALUES ('est quam pharetra', 55);
INSERT INTO values (name, "values_list_id") VALUES ('erat', 56);
INSERT INTO values (name, "values_list_id") VALUES ('ac', 57);
INSERT INTO values (name, "values_list_id") VALUES ('luctus tincidunt', 58);
INSERT INTO values (name, "values_list_id") VALUES ('tortor', 59);
INSERT INTO values (name, "values_list_id") VALUES ('at turpis donec', 60);
INSERT INTO values (name, "values_list_id") VALUES ('interdum', 61);
INSERT INTO values (name, "values_list_id") VALUES ('in lectus', 62);
INSERT INTO values (name, "values_list_id") VALUES ('pede', 63);
INSERT INTO values (name, "values_list_id") VALUES ('et magnis dis', 64);
INSERT INTO values (name, "values_list_id") VALUES ('amet lobortis sapien', 65);
INSERT INTO values (name, "values_list_id") VALUES ('morbi', 66);
INSERT INTO values (name, "values_list_id") VALUES ('luctus cum', 67);
INSERT INTO values (name, "values_list_id") VALUES ('donec', 68);
INSERT INTO values (name, "values_list_id") VALUES ('faucibus', 69);
INSERT INTO values (name, "values_list_id") VALUES ('pretium iaculis justo', 70);
INSERT INTO values (name, "values_list_id") VALUES ('integer ac leo', 71);
INSERT INTO values (name, "values_list_id") VALUES ('nulla sed', 72);
INSERT INTO values (name, "values_list_id") VALUES ('cubilia curae', 73);
INSERT INTO values (name, "values_list_id") VALUES ('est donec odio', 74);
INSERT INTO values (name, "values_list_id") VALUES ('et commodo vulputate', 75);
INSERT INTO values (name, "values_list_id") VALUES ('sapien urna', 76);
INSERT INTO values (name, "values_list_id") VALUES ('amet consectetuer', 77);
INSERT INTO values (name, "values_list_id") VALUES ('ante', 78);
INSERT INTO values (name, "values_list_id") VALUES ('amet eleifend', 79);
INSERT INTO values (name, "values_list_id") VALUES ('rutrum', 80);
INSERT INTO values (name, "values_list_id") VALUES ('aliquam', 81);
INSERT INTO values (name, "values_list_id") VALUES ('mus', 82);
INSERT INTO values (name, "values_list_id") VALUES ('tristique in tempus', 83);
INSERT INTO values (name, "values_list_id") VALUES ('at', 84);
INSERT INTO values (name, "values_list_id") VALUES ('phasellus', 85);
INSERT INTO values (name, "values_list_id") VALUES ('id consequat', 86);
INSERT INTO values (name, "values_list_id") VALUES ('pellentesque', 87);
INSERT INTO values (name, "values_list_id") VALUES ('auctor sed', 88);
INSERT INTO values (name, "values_list_id") VALUES ('bibendum', 89);
INSERT INTO values (name, "values_list_id") VALUES ('interdum', 90);
INSERT INTO values (name, "values_list_id") VALUES ('nec dui luctus', 91);
INSERT INTO values (name, "values_list_id") VALUES ('vehicula condimentum curabitur', 92);
INSERT INTO values (name, "values_list_id") VALUES ('sit amet lobortis', 93);
INSERT INTO values (name, "values_list_id") VALUES ('vivamus vestibulum sagittis', 94);
INSERT INTO values (name, "values_list_id") VALUES ('duis ac', 95);
INSERT INTO values (name, "values_list_id") VALUES ('erat quisque', 96);
INSERT INTO values (name, "values_list_id") VALUES ('nam', 97);
INSERT INTO values (name, "values_list_id") VALUES ('aliquam', 98);
INSERT INTO values (name, "values_list_id") VALUES ('sapien', 99);
INSERT INTO values (name, "values_list_id") VALUES ('sit amet cursus', 100);
INSERT INTO values (name, "values_list_id") VALUES ('tempus semper', 101);
INSERT INTO values (name, "values_list_id") VALUES ('in', 102);
INSERT INTO values (name, "values_list_id") VALUES ('tortor quis turpis', 103);
INSERT INTO values (name, "values_list_id") VALUES ('vivamus metus', 104);
INSERT INTO values (name, "values_list_id") VALUES ('ante ipsum primis', 105);
INSERT INTO values (name, "values_list_id") VALUES ('consequat morbi a', 106);
INSERT INTO values (name, "values_list_id") VALUES ('dui proin', 107);


/*VALUES-LIST*/
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (2, 1);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (3, 1);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (4, 1);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (5, 1);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (6, 1);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (7, 1);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (9, 1);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (11, 1);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (12, 1);

INSERT INTO values_lists ("category_property_id", "product_id") VALUES (2, 2);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (3, 2);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (4, 2);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (5, 2);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (6, 2);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (7, 2);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (9, 2);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (11, 2);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (12, 2);

INSERT INTO values_lists ("category_property_id", "product_id") VALUES (2, 3);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (3, 3);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (4, 3);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (5, 3);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (6, 3);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (7, 3);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (9, 3);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (11, 3);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (12, 3);

INSERT INTO values_lists ("category_property_id", "product_id") VALUES (2, 4);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (3, 4);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (4, 4);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (5, 4);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (6, 4);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (7, 4);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (9, 4);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (11, 4);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (12, 4);

/*2*/
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (14, 5);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (15, 5);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (16, 5);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (17, 5);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (18, 5);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (19, 5);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (20, 5);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (24, 5);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (25, 5);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (27, 5);

INSERT INTO values_lists ("category_property_id", "product_id") VALUES (14, 6);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (15, 6);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (16, 6);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (17, 6);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (18, 6);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (19, 6);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (20, 6);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (24, 6);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (25, 6);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (27, 6);

INSERT INTO values_lists ("category_property_id", "product_id") VALUES (14, 7);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (15, 7);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (16, 7);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (17, 7);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (18, 7);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (19, 7);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (20, 7);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (24, 7);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (25, 7);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (27, 7);

INSERT INTO values_lists ("category_property_id", "product_id") VALUES (14, 8);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (15, 8);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (16, 8);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (17, 8);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (18, 8);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (19, 8);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (20, 8);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (24, 8);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (25, 8);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (27, 8);

/*3*/
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (29, 9);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (30, 9);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (31, 9);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (32, 9);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (33, 9);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (36, 9);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (40, 9);

INSERT INTO values_lists ("category_property_id", "product_id") VALUES (29, 10);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (30, 10);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (31, 10);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (32, 10);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (33, 10);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (36, 10);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (40, 10);

INSERT INTO values_lists ("category_property_id", "product_id") VALUES (29, 11);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (30, 11);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (31, 11);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (32, 11);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (33, 11);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (36, 11);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (40, 11);

/*4*/
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (42, 12);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (43, 12);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (44, 12);

INSERT INTO values_lists ("category_property_id", "product_id") VALUES (42, 13);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (43, 13);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (44, 13);

INSERT INTO values_lists ("category_property_id", "product_id") VALUES (42, 14);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (43, 14);
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (44, 14);

/*5*/
INSERT INTO values_lists ("category_property_id", "product_id") VALUES (50, 16);

/*WISHLIST*/
INSERT INTO wishlists ("user_id", "product_id") VALUES (10, 8);
INSERT INTO wishlists ("user_id", "product_id") VALUES (7, 5);
INSERT INTO wishlists ("user_id", "product_id") VALUES (10, 9);
INSERT INTO wishlists ("user_id", "product_id") VALUES (10, 10);
INSERT INTO wishlists ("user_id", "product_id") VALUES (6, 3);
INSERT INTO wishlists ("user_id", "product_id") VALUES (10, 13);
INSERT INTO wishlists ("user_id", "product_id") VALUES (2, 2);
INSERT INTO wishlists ("user_id", "product_id") VALUES (8, 7);
INSERT INTO wishlists ("user_id", "product_id") VALUES (5, 15);
INSERT INTO wishlists ("user_id", "product_id") VALUES (6, 4);
```
***
## Revision history
 
Changes made to the first submission:  
1. Indexs have the reference of their related query.
2. There's only one clustered index for the relation products.
3. Fixed full-text-search index.

***
 
GROUP1761, 10/04/2018

* Bárbara Sofia Lopez de Carvalho Ferreira da Silva, up201505628@fe.up.pt
* Carlos Miguel da Silva de Freitas, up201504749@fe.up.pt
* Julieta Pintado Jorge Frade, up201506530@fe.up.pt
* Luís Noites Martins, up201503344@fe.up.pt